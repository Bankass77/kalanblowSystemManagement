<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout/layout">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title th:text="#{user.all}">Les Utilisateurs</title>
<!-- Favicon icon -->
<link rel="icon" type="image/png" href="favicon.png">

<!-- Font Icon -->
<link rel="stylesheet"
	href="/auth/fonts/material-icon/css/material-design-iconic-font.min.css">

<!-- Main css -->
<link rel="stylesheet" href="/auth/css/style.css">
<link rel="stylesheet" href="/dashboard/html/css/style.css">
<!-- Bootstrap Core CSS -->
/editeUser/(id=${user.id}
<link href="/dashboard/assets/plugins/bootstrap/css/bootstrap.min.css"
	rel="stylesheet">
<!-- chartist CSS -->
<link href="/dashboard/assets/plugins/chartist-js/dist/chartist.min.css"
	rel="stylesheet">
<link
	href="/dashboard/assets/plugins/chartist-js/dist/chartist-init.css"
	rel="stylesheet">
<link
	href="/dashboard/assets/plugins/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.css"
	rel="stylesheet">
<!--This page css - Morris CSS -->
<link href="/dashboard/assets/plugins/c3-master/c3.min.css"
	rel="stylesheet">
<!-- Custom CSS -->
<link href="/dashboard/html/css/style.css" rel="stylesheet">
<!-- You can change the theme colors from here -->
<link href="/dashboard/html/css/colors/blue.css" id="theme"
	rel="stylesheet">
<!-- Material icons and fonts -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/5.5.55/css/materialdesignicons.min.css" />
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css" />
<script src="/dashboard/assets/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap tether Core JavaScript -->
<script src="/dashboard/assets/plugins/bootstrap/js/tether.min.js"></script>
<script src="/dashboard/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- slimscrollbar scrollbar JavaScript -->
<script src="/dashboard/html/js/jquery.slimscroll.js"></script>
<!--Wave Effects -->
<script src="/dashboard/html/js/waves.js"></script>
<!--Menu sidebar -->
<script src="/dashboard/html/js/sidebarmenu.js"></script>
<!--stickey kit -->
<script
	src="/dashboard/assets/plugins/sticky-kit-master/dist/sticky-kit.min.js"></script>
<!--Custom JavaScript -->
<script src="/dashboard/html/js/custom.min.js"></script>
<!-- chartist chart -->
<script src="/dashboard/assets/plugins/chartist-js/dist/chartist.min.js"></script>
<script
	src="/dashboard/assets/plugins/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.min.js"></script>
<!--c3 JavaScript -->
<script src="/dashboard/assets/plugins/d3/d3.min.js"></script>
<script src="/dashboard/assets/plugins/c3-master/c3.min.js"></script>
<!-- Chart JS -->
<script src="/dashboard/html/js/dashboard1.js"></script>
</head>
<body style="background: #4f5050">

	<div th:insert="fragments/sidebar :: sidebar"></div>

	<!-- ============================================================== -->
	<!-- Container fluid  -->
	<!-- ============================================================== -->
	<div class="container-fluid" th:insert="fragments/navigation">
		<h1 th:text="#{user.all}" class="page-titles display-flex-center"></h1>
	</div>
	<div class="container" id="mainContainer">
		<!-- ============================================================== -->
		<!-- Bread crumb and right sidebar toggle -->
		<!-- ============================================================== -->
		<!--    <div class="row page-titles">
        <div class="col-md-5 col-8 align-self-center">
            <h3 class="text-themecolor">Dashboard</h3>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="home">Home</a></li>
                <li class="breadcrumb-item active">Dashboard</li>
            </ol>
        </div>
    </div> -->
		<!-- ============================================================== -->
		<!-- End Bread crumb and right sidebar toggle -->
		<!-- ============================================================== -->
		<!-- ============================================================== -->
		<!-- Start Page Content -->
		<!-- ============================================================== -->
		<!-- Row -->

		<div class="card-header bg-dark font-white">


			<!--Search user-->
			<div class="row col-lg-12 d-flex flex-nowrap pb-2">
				<div class="input-group">
					<select class="custom-select" id="search-user-dropdown"
						onchange="saveSearchParameters(this);">
						<option value="ID">ID</option>
						<option value="fullName">fullName</option>
						<option value="Email">Email</option>
					</select> <input type="text" id="searchUserBar"
						onkeyup='saveSearchParameters(this);'
						placeholder="Search for users.." class="form-control"
						aria-label="Text input with dropdown button">
				</div>
				<button type="button" class="btn btn-secondary ml-2"
					onclick="searchUserByProperty()">Search</button>
			</div>

			<!--Table with users-->
			<div th:if="${users.isEmpty()}">[[#{no.users}]]</div>
			<div class="table-responsive" th:unless="${users.isEmpty()}"
				id="mainContainerRepleace">
				<table class="table table-bordered">
					<thead class="thead-dark">
						<tr class="table-active">
							<th onclick="sortTable(0)" scope="col" th:text="#{label.user.id}"></th>
							<th onclick="sortTable(1)" scope="col"
								th:text="#{user.headers.firstName}"></th>
							<th onclick="sortTable(2)" scope="col"
								th:text="#{user.headers.lastName}"></th>
							<th onclick="sortTable(3)" scope="col"
								th:text="#{user.headers.email}"></th>
							<th onclick="sortTable(4)" scope="col"
								th:text="#{user.headers.mobileNumber}"></th>
							<th onclick="sortTable(5)" scope="col"
								th:text="#{label.user.birthDate}"></th>
							<th onclick="sortTable(6)" scope="col"
								th:text="#{label.user.password}"></th>
							<th onclick="sortTable(7)" scope="col"
								th:text="#{label.user.confirmPass}"></th>
							<th onclick="sortTable(8)" scope="col" th:text="#{user.roles}"></th>
							<th onclick="sortTable(9)" scope="col"
								th:text="#{header.address.list}"></th>
							<th scope="col" th:text="#{user.del}"></th>
							<th scope="col" th:text="#{user.edit}"></th>
						</tr>
					</thead>
					<tbody align="center">
						<tr th:each="user : ${users}" class="table-primary">
							<td class="table-primary" scope="col" th:text="${user.id}"></td>
							<td class="table-secondary" scope="col"
								th:text="${user.firstName}"></td>
							<td class="table-success" scope="col" th:text="${user.lastName}"></td>
							<td class="table-danger" scope="col" th:text="${user.email}"></td>
							<td class="table-warning" scope="col"
								th:text="${user.mobileNumber}"></td>
							<td class="table-info" scope="col" th:text="${user.birthDate}"></td>
							<td class="table-light" scope="col" th:text="${user.password}"></td>
							<td class="table-dark" scope="col"
								th:text="${user.matchingPassword}"></td>
							<td class="table-secondary" th:text="${user.roles}"></td>
							<td>
								<p th:each="address : ${user.adresse}">
									<span th:text="${address.street}">Street</span> <span
										th:text="${address.streetNumber}">Street Number</span> <span
										th:text="${address.city}">City</span> <span
										th:text="${address.codePostale}">ZIP</span> <span
										th:text="${address.state}">State</span> <span
										th:text="${address.country}">country</span>
								</p>
							</td>
							<!-- <td th:switch="${user.enabled}"><span th:case="true"
								style="color: green">Enabled</span> <span th:case="false"
								style="color: red">Disabled</span></td> -->

							<!--Remove user button-->
							<td><a id="remove-link"
								style="text-decoration: none; color: red" data-toggle='modal'
								data-target='#deleteModal' data-placement="right"
								title="Remove user"
								th:onclick="'setRowIndexAndUserId(this, ' + ${user.id} + ')'">
									<i class="fa fa-times" aria-hidden="true"></i>
							</a></td>
							<!--Edit user button-->
							<td><a style="text-decoration: none; color: blue"
								th:href="@{/editeUser/{id}(id=${user.id})}" class="editBtn"
								data-toggle="tooltip" data-placement="right" title="Edit user">
									<i class="fa fa-edit"></i>
							</a></td>
					</tbody>
				</table>
				<div th:replace="fragments/deleteUserModal :: delete-user-modal"></div>
				<!-- <div th:replace="fragments/pagination :: controls(page=${users})"></div> -->
				<div class="col-lg-3 pl-0">
					<!--Delete success message-->
					<div id="alert-messages"></div>

					<!--Save success message-->
					<div th:if="${userHasBeenSaved}"
						class="alert alert-success alert-dismissible fade show"
						role="alert">
						<button type="button" class="close" data-dismiss="alert"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<strong>Well done!</strong> User has been saved!!!
					</div>

					<!--Update success message-->
					<div th:if="${userHasBeenUpdated}"
						class="alert alert-success alert-dismissible fade show"
						role="alert">
						<button type="button" class="close" data-dismiss="alert"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<strong>Well done!</strong> User has been updated!!!
					</div>

					<!--Number format exception message-->
					<div th:if="${numberFormatException}"
						class="alert alert-danger alert-dismissible fade show"
						role="alert">
						<button type="button" class="close" data-dismiss="alert"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						Please enter a valid number
					</div>

					<!--No matches found message-->
					<div th:if="${noMatches}"
						class='alert alert-info alert-dismissible fade show' role='alert'>
						<button type='button' class='close' data-dismiss='alert'
							aria-label='Close'>
							<span aria-hidden='true'>&times;</span>
						</button>
						Sorry, no matches found for <span th:text="${usersProperty}"></span>
						= <span th:text="${propertyValue}"></span>
					</div>
				</div>
			</div>

			<a href="#" th:href="@{/signup}">
				<button type="button" class="btn btn-primary">New User</button>
			</a>

			<!--Paging-->
			<div id="paging-section" class="row" style="margin-top: 10px;">

				<!--Page size dropdown-->
				<div class="form-group col-md-1" th:if="${users.totalPages != 0}">

					<!--Get pageSizesToShow-->
					<div hidden id="pageSizesToShow"
						th:attr="data-pageSizesToShow = ${pager.pageSizesToShowInJSON}"></div>

					<select class="form-control pagination" id="pageSizeSelect">
						<option th:each="pageSize : ${pageSizes}" th:text="${pageSize}"
							th:value="${pageSize}"
							th:selected="${pageSize} == ${selectedPageSize}"></option>
					</select>
				</div>

				<!--Pages-->
				<nav aria-label="Page navigation example"
					class="form-group col-md-11 pagination-centered">
					<ul class="pagination" th:if="${users.totalPages != 0}">
						<li th:class="${users.number == 0} ? 'page-item disabled'"
							class="page-item"><a
							th:if="${not #strings.isEmpty(propertyValue)}" class="page-link"
							th:href="@{/admin/allUsers(usersProperty=${usersProperty},
                                       propertyValue=${propertyValue}, pageSize=${selectedPageSize}, page=1)}">
								&laquo; </a> <a th:if="${#strings.isEmpty(propertyValue)}"
							class="page-link"
							th:href="@{/admin/allUsers(pageSize=${selectedPageSize}, page=1)}">
								&laquo; </a></li>
						<li th:class="${users.number == 0} ? 'page-item disabled'"
							class="page-item"><a
							th:if="${not #strings.isEmpty(propertyValue) }" class="page-link"
							th:href="@{/admin/allUsers(usersProperty=${usersProperty},
                                       propertyValue=${propertyValue}, pageSize=${selectedPageSize}, page=${users.number})}">
								&larr; </a> <a th:if="${#strings.isEmpty(propertyValue)}"
							class="page-link"
							th:href="@{/admin/allUsers(pageSize=${selectedPageSize}, page=${users.number})}">
								&larr; </a></li>
						<li
							th:class="${users.number == (page - 1)} ? 'active pointer-disabled'"
							class="page-item"
							th:each="page : ${#numbers.sequence(pager.startPage, pager.endPage)}">
							<a th:if="${not #strings.isEmpty(propertyValue)}"
							class="page-link"
							th:href="@{/admin/allUsers(usersProperty=${usersProperty},
                                       propertyValue=${propertyValue}, pageSize=${selectedPageSize}, page=${page})}"
							th:text="${page}"> </a> <a
							th:if="${#strings.isEmpty(propertyValue)}" class="page-link"
							th:href="@{/admin/allUsers(pageSize=${selectedPageSize}, page=${page})}"
							th:text="${page}"> </a>
						</li>
						<li
							th:class="${users.number + 1 == users.totalPages} ? 'page-item disabled'"
							class="page-item"><a
							th:if="${not #strings.isEmpty(propertyValue)}" class="page-link"
							th:href="@{/admin/allUsers(usersProperty=${usersProperty},
                                       propertyValue=${propertyValue}, pageSize=${selectedPageSize}, page=${users.number + 2})}">
								&rarr; </a> <a th:if="${#strings.isEmpty(propertyValue)}"
							class="page-link"
							th:href="@{/admin/allUsers(pageSize=${selectedPageSize}, page=${users.number + 2})}">
								&rarr; </a></li>
						<li
							th:class="${users.number + 1 == users.totalPages} ? 'page-item disabled'"
							class="page-item"><a
							th:if="${not #strings.isEmpty(propertyValue) }" class="page-link"
							th:href="@{/admin/allUsers(usersProperty=${usersProperty}, propertyValue=${propertyValue},
                                       pageSize=${selectedPageSize}, page=${users.totalPages})}">
								&raquo; </a> <a th:if="${#strings.isEmpty(propertyValue)}"
							class="page-link"
							th:href="@{/admin/allUsers(pageSize=${selectedPageSize}, page=${users.totalPages})}">
								&raquo; </a></li>
					</ul>
				</nav>
			</div>

		</div>
	</div>
	<!-- <div th:replace="~{fragments/footer :: footer}"></div> -->
	!-- JavaScript -->
	<script src="../../dashboard/html/js/wow/main.js"
		th:src="@{/dashboard/html/js/wow/main.js}"></script>

</body>
</html>